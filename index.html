<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="index.css">
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <div id="header">
            <h1 id="pageHeader">Resmark API Demonstration</h1>
        </div>
        <div id="body">
            <!-- Token -->
            <div class="section">
                <h3 class="sectionHeader">Get a JWT Token</h3>
                <p class="description">
                     When using the Resmark API you will first need to authenticate your user by obtaining a JWT Token. 
                     This token will be used in every call made to the API to ensure the security of the information 
                     being retrieved. To get this token please invoke the authentication endpoint of the Resmark API while 
                     passing in a username and the API Key of your business, which can be found in your API settings.
                </p>   
                <div class="container">
                    <form id="userDetails" name="userForm">
                        <label for="username">Username</label><br><br>
                        <input type="text" id="username" name="username"><br><br>
                        <label for="key">API Key</label><br><br>
                        <input type="text" id="key" name="key"><br><br>
                        <input type="submit" value="Get Token" class="button" id="submitToken" onclick="returnToken(username.value, key.value); return false">
                    </form>
                    <div id="result">
                        <p id="tokenHeader">Your JWT Token</h5>
                        <p id="jwtToken"></p>
                    </div>
                </div>
                <div class="container">
                    <button class="button getCodeButton" id="getTokenCode">
                        Show API Call
                        <i id="jwtArrow" class="arrow down"></i>
                    </button>
                    <div id="tokenCode">
                            <pre>
                              <code>
                                function getToken(username, key) {
    
                                    //THE INFORMATION WE WILL PASS TO THE API IN THE BODY
                                    const body = {
                                        username: username,
                                        apikey: key
                                    };
                                    const json = JSON.stringify(body);
                                    
                                    //MAKING THE REQUEST, SETTING THE HEADER AND SENDING THE BODY OF THE REQUEST
                                    const jwtToken = new XMLHttpRequest();
                                    jwtToken.open("POST", "https://app.resmarksystems.com/public/api/authenticate",false);
                                    jwtToken.setRequestHeader('Content-type','application/json; charset=utf-8');
                                    jwtToken.send(json);
                                    
                                    token = jwtToken.responseText;
                                
                                    //RETURNING THE TOKEN TO THE CALLING FUNCTION
                                    return(jwtToken.responseText);
                                }
                              </code>
                            </pre>
                    </div>
                </div>
            </div>

            <!-- Display each product with there name, descripition and image. (each product is a link when  clicked it populates the next section) -->
            <div class="section">
                <h3 class="sectionHeader">Show a List of Products</h3>
                <p class="description">This is a description</p>
                <div class="container">
                    <button id="showProducts">Show Products</button>
                    <div id="productContainer"></div>
                </div>

                <div class="container">
                    <button class="button getCodeButton" id="getProductsCode">
                        Show API Call
                        <i id="productsArrow" class="arrow down"></i>
                    </button>
                    <div id="productsCode">
                            <pre>
                              <code>
                                
                              </code>
                            </pre>
                    </div>
                </div>
            </div>

            <!-- Show selected Product and input fields for the date and participants. when entered Show Times Available for date entered when time selected go to next section-->
            <div class="section">
                <h3 class="sectionHeader">Date Selection for the Selected Product</h3>
                <p class="description">This is a description</p>

                <div class="container">
                    <button class="button getCodeButton" id="getDateAndPartCode">
                        Show API Call
                        <i id="dateAndPartArrow" class="arrow down"></i>
                    </button>
                    <div id="dateAndPartCode">
                            <pre>
                              <code>
                                
                              </code>
                            </pre>
                    </div>
                </div>
            </div>

            <!-- Collect the customers information -->
            <div class="section">
                <h3 class="sectionHeader">Collect the Customers Information</h3>
                <p class="description">This is a description</p>

                <div class="container">
                    <button class="button getCodeButton" id="getCustomerCode">
                        Show API Call
                        <i id="customerArrow" class="arrow down"></i>
                    </button>
                    <div id="customerCode">
                            <pre>
                              <code>
                                
                              </code>
                            </pre>
                    </div>
                </div>
            </div>

            <!-- Create the order -->
            <div class="section">
                <h3 class="sectionHeader">Create and then Display the Order</h3>
                <p class="description">This is a description</p>
                
                <div class="container">
                    <button class="button getCodeButton" id="getOrderCode">
                        Show API Call
                        <i id="orderArrow" class="arrow down"></i>
                    </button>
                    <div id="orderCode">
                            <pre>
                              <code>
                                
                              </code>
                            </pre>
                    </div>
                </div>
            </div>
        </div>
        
        <script type="text/javascript" src="index.js"></script>
        <script type="text/javascript" src="showCode.js"></script>
    </body>
</html>